:openshift_cluster_console_url: %openshift_cluster_console_url%

Before we jump in on the actual lab exercises, we thought it would be good to explain how this lab environment is configured and managed. We will also introduce a few concepts and practices that we will utilize throughout the lab exercises to better explain the content that you get to be hands on with. 

NOTE: This lab environment is primarily deployed and managed by using Red Hat OpenShift GitOps and the use of Red Hat OpenShift Operators. However, as this lab and its content is meant to demonstrate concepts rather than best practices, there are aspects to this deployment that are not production-grade and we do not necessary recommend that you model your deployment based on this lab and its content alone.

=== Brief Red Hat OpenShift Overview

Before we go any further, let us briefly explore Red Hat OpenShift together. As you may already know, OpenShift comes in many flavors - including, but not limited to, OpenShift Container Platform, Red Hat OpenShift Service on AWS (ROSA), Azure Red Hat OpenShift (ARO), OpenShift on IBM CLoud, etc. However, for the purpose of this lab, the flavor of OpenShift is irrelevant as the content is agnostic of how it is hosted - as long as it is one of the supported options.

Your lab user account is set up with `cluster-reader` access to allow you permissions to explore all of OpenShift in a read-only capacity. In this chapter we will use this to explore the various components deployed to support the hands-on exercises coming up next.

[start=1]
. Start by accessing OpenShift by clicking the following link: +
{openshift_cluster_console_url}

. Click on the `rhsso` option to log in with, and enter your `username` and `password` that were provided to you at the very beginning of this session.

After successfully authenticating to OpenShift, you will be presented with an Overview screen like the one shown below. Feel free to spend some time here to explore what information is available - including versions, status, consumptions, etc. 

NOTE: The OpenShift Overview dashboard will most likely show multiple warnings and perhaps some errors. Do not worry as this is normal in a multi-user collaboration platform and these should not impact our lab exercises.

image:https://raw.githubusercontent.com/rht-labs-events/summit-lab-2023/main/bookbag.instructions/workshop/content/media/openshift-overview.png[alt="OpenShift Overview",width=750,height=750,link=https://raw.githubusercontent.com/rht-labs-events/summit-lab-2023/main/bookbag.instructions/workshop/content/media/openshift-overview.png]

[start=3]
. Next click on **Operators** >> **Installed Operators** +
 +
Here you can you explore all the operators that are up and running in the cluster. Click on "Project" down-down at the top to select "All Projects" - this will show you all the operators that are currently deployed and operational in the environment. +
 +
In particular, notice and explore the following operators that we rely on for this lab environment:
 - Red Hat OpenShift GitOps
 - Red Hat OpenShift Dev Spaces
 - DevWorkspace Operator
 - Red Hat Single Sign-On Operator

*SCREENSHOT OF OPERATORS VIEW COMING HERE...* (week of May 15th)

[start=4]
. It all started with GitOps - navigate to ArgoCD to see the deployment

*coming soon...* (week of May 15th)

[start=5]
. Next let's explore Red Hat SSO and how it is running. While the `cluster-reader` role that your user is assigned has read-only access to 98% of everything in OpenShift, it won't grant you access to the RH SSO UI. Instead we will explore the Custom Resources deployed to support the runtime use of SSO - including the SSO realm (`KeycloakRealm`), the clients (`KeycloakClient`) used for OpenShift and GitLab integrations, as well as the users (`KeycloakUser`). +
 +
Start by making sure the OpenShift `Administrator` view is active in your browser (Very top under the Red Hat OpenShift logo should show "Administrator"). Next expand the `Administration` menu at the very bottom of the lefthand side menu, then click on `CustomResourceDefinitions`. Next locate the `Keycloak*` CRDs in this list and click on each of them as listed above. Once in the CRD view, click on `Instances` to see the *Custom Resource* instances that RH SSO / keycloak loaded up and that are in active use as we speak. +
 +
You should be able to find the instance for your user that you are logged in with in this list. This is how the users are injected and managed for this lab. +
 +
Imagine how this can be an extension of the GitOps approach above and have ArgoCD manage these resources automatically based on the source-of-truth git repo. 

*SCREENSHOT OF RH SSO COMING HERE...* (week of May 15th)

[start=6]
. We use GitLab as our source control management in this lab. This instance was deployed by using helm charts that allows for customization - including SSO integration. 

*coming soon...* (week of May 15th)

=== Big Picture - Scaffolding

One of the many practices we like to use here at Red Hat is the Big Picture (more details found in the https://openpracticelibrary.com/practice/the-big-picture[Open Practice Library]). This practice allows us to achieve a shared understanding of the deployment regardless of the technical skill level + it allows us to achieve quick directional decisions through dry-run prototyping without requiring actual technology running. 

Below is the Big Picture for the scaffolding described above. Please use the key at the bottom to identify the various components you explored in the previous steps.

image:https://raw.githubusercontent.com/rht-labs-events/summit-lab-2023/main/bookbag.instructions/workshop/content/media/bigpicture-scaffolding.jpg[alt="Big Picture - Scaffolding",width=750,height=750,link=https://raw.githubusercontent.com/rht-labs-events/summit-lab-2023/main/bookbag.instructions/workshop/content/media/bigpicture-scaffolding.jpg]

=== Red Hat OpenShift Dev Spaces Deployment

Now that we have explored how the core components are running to support our lab, let us explore how Red Hat OpenShift Dev Spaces is made available to users. 

*more info coming soon* (week of May 15th)


=== GitLab and OAuth

All of the tools in this lab have been integrated with Single Sign On, including OpenShift, GitLab, and Dev Spaces. This allows a centralized place where the users are managed, and for a better overall user experience. However, there is one more OAuth integration in play. By configuring OAuth for the git provider, in this case GitLab, it allows users to work with remote git repositories without explicitly providing credentials.


=== Big Picture - Dev Integration

With the Red Hat OpenShift Dev Spaces instance deployed, and the GitLab OAuth integration configured, it is time to take another look at the Big Picture to see the extra components deployed and integrations made. 

image:https://raw.githubusercontent.com/rht-labs-events/summit-lab-2023/main/bookbag.instructions/workshop/content/media/bigpicture-dev-integration.jpg[alt="Big Picture - Scaffolding",width=750,height=750,link=https://raw.githubusercontent.com/rht-labs-events/summit-lab-2023/main/bookbag.instructions/workshop/content/media/bigpicture-dev-integration.jpg]